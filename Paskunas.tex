\documentclass[leqno]{amsart}
\usepackage{amssymb}
\usepackage{amsmath} 
\usepackage{enumitem}
\usepackage{hyperref}
\usepackage{mathrsfs}
\usepackage{color}
\usepackage{mathtools,caption,bbm,euscript}
\usepackage[table,dvipsnames]{xcolor}
\usepackage{tikz-cd}
\usepackage[utf8]{inputenc}
\usepackage[OT2,T1]{fontenc}
\hypersetup{
 colorlinks=true,
 linkcolor=DarkOrchid,
 filecolor=blue,
 citecolor=olive,
 urlcolor=orange,
 pdftitle={Pask\={u}nas' theory},
 %pdfpagemode=FullScreen,
 }
\usepackage{booktabs}
%[label=(\alph*)]
%[label=(\Alph*)]
%[label=(\roman*)]
%[label={(\bfseries R\arabic*)}]


\setlength{\textwidth}{\paperwidth}
\addtolength{\textwidth}{-2in}
\calclayout

\tikzset{
  symbol/.style={
    draw=none,
    every to/.append style={
      edge node={node [sloped, allow upside down, auto=false]{$#1$}}}
  }
}

\newcommand{\smat}[1]{\left( \begin{smallmatrix} #1 \end{smallmatrix} \right)}
\newcommand{\mat}[1]{\left( \begin{smallmatrix} #1 \end{smallmatrix} \right)}
\newcommand{\dBr}[1]{\llbracket{#1}\rrbracket}
\newcommand{\leg}[2]{\left(\frac{#1}{#2}\right)}

% double bracket
\makeatletter
\newsavebox{\@brx}
\newcommand{\llangle}[1][]{\savebox{\@brx}{\(\m@th{#1\langle}\)}%
  \mathopen{\copy\@brx\kern-0.5\wd\@brx\usebox{\@brx}}}
\newcommand{\rrangle}[1][]{\savebox{\@brx}{\(\m@th{#1\rangle}\)}%
  \mathclose{\copy\@brx\kern-0.5\wd\@brx\usebox{\@brx}}}
  \newcommand{\llbracket}[1][]{\savebox{\@brx}{\(\m@th{#1[}\)}%
  \mathopen{\copy\@brx\kern-0.5\wd\@brx\usebox{\@brx}}}
\newcommand{\rrbracket}[1][]{\savebox{\@brx}{\(\m@th{#1]}\)}%
  \mathclose{\copy\@brx\kern-0.5\wd\@brx\usebox{\@brx}}}
\makeatother


\newcommand{\Gp}{\mathcal{G}_{\Qp}} %Galois group over \Qp
\newcommand{\Fr}{\textnormal{Fr}} %geometric Frobenius
\newcommand{\frob}{\textnormal{frob}} %arithmetic Frobenius


\newcommand{\aMod}{\textnormal{Mod}^{\textnormal{adm}}}
\newcommand{\laMod}{\textnormal{Mod}^{\textnormal{l.adm}}}
\newcommand{\lfMod}{\textnormal{Mod}^{\textnormal{lfin}}}
\newcommand{\Ban}{\textnormal{Ban}^{\textnormal{adm.fl}}}


\DeclareMathOperator{\Mod}{\textnormal{Mod}}
\DeclareMathOperator{\Rep}{Rep}
\DeclareMathOperator{\Ord}{Ord}
\DeclareMathOperator{\Irr}{Irr}
\DeclareMathOperator{\WD}{WD}
\DeclareMathOperator{\soc}{soc}
\DeclareMathOperator{\V}{\check{\mathbf{V}}} %Colmez

\newcommand{\dR}{\textnormal{dR}}
\newcommand{\pst}{\textnormal{pst}}
\newcommand{\cris}{\textnormal{cris}}
\newcommand{\cont}{\textnormal{cont}}
\newcommand{\cts}{\textnormal{cts}}
\newcommand{\alg}{\textnormal{alg}}
\newcommand{\sm}{\textnormal{sm}}
\newcommand{\ps}{\textnormal{ps}}
\newcommand{\red}{\textnormal{red}}
\newcommand{\fin}{\textnormal{fin}}
\newcommand{\an}{\textnormal{an}}
\newcommand{\ord}{\textnormal{ord}}


\newcommand{\GG}{\mathbb G}

%%% Linear algebraic groups
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\SL}{SL}
\DeclareMathOperator{\gl}{\mathfrak{gl}}
\DeclareMathOperator{\mtr}{tr}
\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\Ad}{Ad}
\DeclareMathOperator{\vol}{vol}
\DeclareMathOperator{\Sym}{Sym}

\DeclareMathOperator{\val}{val}
\DeclareMathOperator{\Lie}{Lie}
\DeclareMathOperator{\Pol}{Pol_p}

%%% Adelic rings
\newcommand{\Q}{{\mathbf{Q}}}
\newcommand{\Z}{{\mathbf{Z}}}
\newcommand{\Qp}{\mathbf{Q}_p}
\newcommand{\Zp}{\mathbf{Z}_p}
\newcommand{\Ql}{\mathbf{Q}_\ell}
\newcommand{\Zl}{\mathbf{Z}_\ell}
\newcommand{\R}{\mathbf R}
\newcommand{\C}{\mathbf C}
\newcommand{\A}{\mathbf A}
\newcommand{\hZ}{{\hat{\mathbf{Z}}}}
\newcommand{\dd}{\mathfrak{d}} %different
\newcommand{\DD}{\mathcal{D}}  %discriminant

\newcommand{\arch}{\mathbf{a}}
\newcommand{\finite}{\mathbf{h}}

\newcommand{\F}{{\mathbf{F}}} %global 
\newcommand{\OF}{{\mathcal{O}_{\F}}}
\newcommand{\K}{{\mathcal{K}}} %global quadratic
\newcommand{\OK}{\mathcal{O}_{\K}}
\newcommand{\kk}{F} %local
\newcommand{\E}{E} %local quadratic


\DeclareMathOperator{\Sel}{Sel}
\DeclareMathOperator{\Gal}{Gal}
\DeclareMathOperator{\Nr}{\mathsf{N}}
\DeclareMathOperator{\Tr}{Tr}
\newcommand{\qch}{\epsilon} % quadratic character of K/F


%%% Fonts
\newcommand{\oeu}{\EuScript{O}}
\newcommand{\eeu}{\EuScript{E}}
\newcommand{\feu}{\EuScript{F}}
\newcommand{\geu}{\EuScript{G}}
\newcommand{\keu}{\EuScript{K}}

\newcommand{\oo}{\mathcal O}
\newcommand{\bs}{\mathcal S}
\newcommand{\id}{\mathbf{1}}

\newcommand{\TT}{\mathbb{T}}



\newcommand{\1}{\mathbf{1}} 
\newcommand{\bfe}{\mathbf e}
\newcommand{\bff}{\mathbf f}

\newcommand{\bX}{\mathbb{X}}
\newcommand{\bY}{\mathbb{Y}}
\newcommand{\bV}{\mathbb{V}}
\newcommand{\bW}{\mathbb{W}}

\newcommand{\fa}{\mathfrak a}
\newcommand{\fg}{\mathfrak g}
\newcommand{\fc}{\mathfrak c}
\newcommand{\fC}{\mathfrak C}
\newcommand{\B}{\mathfrak B}
\newcommand{\fs}{\mathfrak s}
\newcommand{\fm}{\mathfrak m}
\newcommand{\fn}{\mathfrak n}
\newcommand{\fl}{\mathfrak l}
\newcommand{\fp}{\mathfrak p}
\newcommand{\bfp}{\overline{\mathfrak p}}
\newcommand{\fq}{\mathfrak q}
\newcommand{\bfq}{\overline{\mathfrak q}}


\newcommand{\btheta}{\boldsymbol{\theta}}
\newcommand{\bdelta}{\boldsymbol{\delta}}


\newcommand{\fG}{\mathfrak{G}}
\newcommand{\fX}{\mathfrak{X}}
\newcommand{\euW}{\EuScript{W}}


%%% Categorical
\DeclareMathOperator{\Ext}{Ext}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Inj}{Inj}
\DeclareMathOperator{\Image}{Im}
\DeclareMathOperator{\Isom}{Isom}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Ind}{Ind}
\DeclareMathOperator{\cInd}{c-Ind}
\DeclareMathOperator{\coker}{coker}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\corank}{corank}
\DeclareMathOperator{\Res}{Res}
\DeclareMathOperator{\rec}{rec}
\DeclareMathOperator{\Rec}{Rec}

%\newcommand{\red}[1]{\textcolor{Red}{#1}}


\newtheorem{thm}{Theorem}[section]
\newtheorem{lem}[thm]{Lemma}
\newtheorem{prop}[thm]{Proposition}
\newtheorem{cor}[thm]{Corollary}


\theoremstyle{definition}
\newtheorem{defn}[thm]{Definition}


\theoremstyle{remark}
\newtheorem{rem}[thm]{Remark}
\newtheorem{ack}{Acknowledgement}




\begin{document}
\title{Pask\={u}nas' theory}
\author[Y-S.~Lee]{Yu-Sheng Lee}
\address{Department of Mathematics, University  of Michigan, Ann Arbor, MI 48109, USA}
\email{yushglee@umich.edu}
\date{\today}

\maketitle
\setcounter{tocdepth}{1}
\tableofcontents




\section{Pask\={u}nas' theory}

In this section,
$G$ denotes  $\GL_2(\Qp)$, 
$K$ denotes  $\GL_2(\Zp)$,  
$P$ and  $\bar{P}$ 
be the upper and lower triangular subgroups,
$T\subset G$ denotes the diagonal torus,
and  $Z\subset T$ is the center of  $G$.
Let  $\Gp$ be the absolute Galois group of  $\Qp$,
we normalize the reciprocity map  geometrically
so that  $p\in \Qp^\times$
is sent to a geometric Frobenius  $\Fr$.
We identify characters of  $\Qp^\times$
and characters of  $\Gp$ through the reciprocity.
In particular, 
the $p$-adic cyclotomic character $\varepsilon$ 
and the Teichmuller character $\omega$
are viewed as characters of both  $\Gp$ and  $\Qp^\times$.

Addtionally,
we denote by $L$ a sufficiently large 
finite extension of  $\Qp$,
with the ring of integers  $\oo$,
a uniformizer  $\varpi$,
and the residue field $k$.
We fix 
two continuous characters
$\chi_1,\chi_2\colon \Gp\to k^\times$ 
throughout the section satisfying
the following generic assumption
\begin{equation}\label{cond:generic}\tag{\text{gen}}
	\chi_1\chi_2^{-1}\neq \id,\omega^{\pm1}.
\end{equation}
And let $\zeta\colon \Gp\to L^\times$
be the Teichmuller lift of the character  $\chi_1\chi_2\omega^{-1}$.



\subsection{generically reducible deformation}

We recall from \cite[\S B.1]{pask}
the structure of the universal deformation ring $R_{\Psi}^{\ps}$
of the $2$-dimensional pseudo-representation $\Psi=\chi_1+\chi_2$. 

The assumption \eqref{cond:generic}
implies the existence of non-split extensions
\begin{equation*}
    0\to \chi_1\to \rho_{12}\to \chi_2\to 0\quad
    0\to \chi_2\to \rho_{21}\to \chi_1\to 0
\end{equation*}
which are unique up to isomorphisms;
and that the universal deformation rings
$R_{\rho_{ij}}$ of the Galois representations $\rho_{ij}$
are formally smooth of relative dimension $5$ over $\oo$.

Denote by $\tilde{\rho}_{ij}$ the universal deformation,
one may choose bases and think of which as group homomorphisms
$\tilde{\rho}_{ij}\colon \Gp\to \GL_2(R_{\rho_{ij}})$
so that 
$\rho_{12}=\smat{\chi_1&*\\&\chi_2}$ and
$\rho_{21}=\smat{\chi_1&\\ * &\chi_2}$.
Then trace induces $\theta\colon R_{\Psi}^{\ps}\cong R_{\rho_{ij}}$ by \cite[Prop B.17]{pask}.
Since $R^{\red}_{\Psi}$ is formally smooth of relative dimension $4$ over $\oo$,
the reducibility ideal  $\tau\subset R_{\Psi}^{\ps}$ is a principal ideal generated by 
an element in $c\in\fm\setminus \fm^2$,
where $\fm\subset R_{\Psi}^{\ps}$ is the maximal ideal. 
Moreover, let $\tau_{ij}\subset R_{\rho_{ij}} $ be the ideal 
generated by the $(j,i)$-entry of  $ \tilde{\rho}_{ij}(g)$
for all $g\in \Gp$,
then  $\theta$ maps  $\tau$ to  $\tau_{ij}$ by \cite[Prop B.23]{pask}

Let $\tilde{\rho}_{12}^c\colon \Gp\to \GL_2(R_{\rho_{ij}})$ be the representation defined by
\begin{equation*}
	\tilde{\rho}_{12}^c(g)\coloneqq 
	\smat{\theta(c)&\\&1}
	\tilde{\rho}_{12}(g)
	\smat{\theta(c)&\\&1}^{-1}.
\end{equation*}
Then $ \tilde{\rho}_{12}^c$ is a deformation of $\rho_{21}$ to $R_{\rho_{12}}$
and induces an isomorphism $\alpha\colon R_{\rho_{21}}\to R_{\rho_{12}}$,
for which the diagram
\begin{equation*}
	\begin{tikzcd}
		R_{\rho_{21}} \arrow[r,"\alpha"] &
		R_{\rho_{12}}\\
		R_{\Psi}^{\ps} \arrow[u,"\theta"] \arrow[r,equal] &
		R_{\Psi}^{\ps} \arrow[u,"\theta"]
	\end{tikzcd}
\end{equation*}
commutes by \cite[Prop B.24]{pask}.

Identify $\tilde{\rho}_{21}$ with $\tilde{\rho}_{12}^c$,
then
$\Hom_{\Gp}(\tilde{\rho}_{12}, \tilde{\rho}_{21})$ and
$\Hom_{\Gp}(\tilde{\rho}_{21}, \tilde{\rho}_{12})$
are free modules over $R_{\Psi}^{\ps}\cong R_{\rho_{12}}$ 
generated respectively by
\begin{equation}\label{eq:Phi_ij}
	\Phi_{12}=\smat{\theta(c)&\\&1} \text{ and }
	\Phi_{21}=\smat{1&\\&\theta(c)},
\end{equation}
and, the ring $\End_{\Gp}(\tilde{\rho}_{12}\oplus \tilde{\rho}_{21})$
is isomorphic to the generalized matrix algebra
$\smat{R_{\Psi}^{\ps}& R_{\Psi}^{\ps}\Phi_{12}\\ R_{\Psi}^{\ps}\Phi_{21}& R_{\Psi}^{\ps}}$,
which is a free $R_{\Psi}^{\ps}$-module of rank  $4$,
with the center isomorphic to  $R_{\Psi}^{\ps}$
by \cite[Prop B.26]{pask}.

In below, we denote by 
$R$,  $R_{12}$, and $R_{21}$
the deformations rings of 
$\Psi$,  $\rho_{12}$, and $\rho_{21}$
of fixed determinant $\det=\zeta\varepsilon$.
By a slight abuse of notations,
we still denote by $\tilde{\rho}_{12}$
and $\tilde{\rho}_{21}$ the universal deformations
of fixed determinant.
The above properties among the deformation rings
remain unchanged,
except that the relative dimensions are reduced by $2$.

\subsection{Ordinary parts}

In this subsection,
we view the characters introduced 
in the previous subsection as characters
on $\Qp^\times$ by the reciprocity map,
as remarked in the begining of the section.
We start by recalling the results from
\cite[\S 7 \S 8]{pask}
on the generic blocks of the categories
$\laMod_{G,\zeta}(\oo), \laMod_{T,\zeta}(\oo)$,
and their duals $\fC_G(\oo), \fC_T(\oo)$.

Let $\chi, \chi^s\alpha\colon T\to k^\times$
denote the character  
$\chi=\chi_1\otimes\chi_2\omega^{-1}$
and  $\chi^s\alpha=\chi_2\otimes \chi_1\omega^{-1}$, and
\[
\pi_1\coloneqq \Ind_{P}^G\chi\cong
\Ind_{P}^G\chi_1\otimes\chi_2\omega^{-1}\quad
\pi_2\coloneqq \Ind_{P}^G\chi^s\alpha\cong 
\Ind_{P}^G\chi_2\otimes\chi_1\omega^{-1} \in \laMod_{G,\zeta}(\oo).
\]
By \cite[Thm 30]{barthel},
$\pi_i$ are irreducible for  $i=1,2$;
and by \cite[Thm 33]{barthel}, there exists
smooth irreducible $KZ$-representations $\sigma_i$
and exact sequences
\begin{equation}
	0\to \cInd_{KZ}^G\sigma_i\to
	\cInd_{KZ}^G\sigma_i\to \pi_i\to 0
\end{equation}
where the injectiveness follows from \cite[Thm 19]{barthel}.


Let
$\Ord_P\colon \laMod_{G,\zeta}(\oo)\to \laMod_{T,\zeta}(\oo)$
be the functor of ordinary parts
defined by Emerton in \cite{emeI}.
By \cite[Thm 4.4.6]{emeI},
the functor satisfies the adjunction formula
\begin{equation}\label{eq:adj}
	\Hom_{A[G]}(\Ind_{\bar{P}}^GU,V)\cong
	\Hom_{A[T]}(U,\Ord_PV)
\end{equation}
by passage to ordinary parts and apply the isomorphism 
$\Ord_P(\Ind_{\bar{P}}^GU)\cong U$.

By \cite[Prop 7.1]{pask},
when $\iota\colon \pi_1\hookrightarrow \tilde{J}_1$
is the injective envelope of $\pi_1$
in $\laMod_{G,\zeta}(\oo)$,
its passage to the ordinary parts
$\Ord_P(\iota)\colon \Ord_P(\pi_1)\to \Ord_P(\tilde{J}_1)$
is an injective envelope of $\chi^s=\Ord_P(\pi_1)$
in $\laMod_{T,\zeta}(\oo)$.
Furthermore, 
let $\tilde{J}_{\chi^s}$
be the injective envelope of $\chi^s$
in $\laMod_{T,\zeta}(\oo)$,
then a morphism
\begin{equation}\label{eq:inj_envelope}
	\iota_1\colon \Ind_{\bar{P}}^G(\tilde{J}_{\chi^s})\to \tilde{J}_1
\end{equation}
that induces an isomorphism 
$\tilde{J}_{\chi^s}\to \Ord_P(\tilde{J}_1)$
through the adjunction formula \eqref{eq:adj}
is injective.

To simplify notations,
we identify $\laMod_{T,\zeta}(\oo)$
with $\laMod_{\Qp^\times}(\oo)$ through 
the map $\Qp^\times\cong \{\smat{1&\\&*}\}\subset T$;
and identify $\tilde{J}_{\chi^s}$
with $\tilde{J}_{\chi_1}$,
the injective envelope of $\chi_1$
in $\laMod_{\Qp^\times}(\oo)$.
The above results holds similarly for
the injective envelope $\tilde{J}_2$ of $\pi_2$
in $\laMod_{G,\zeta}(\oo)$ and
the injective envelope $\tilde{J}_{\chi_2}$ of $\chi_2$
in $\laMod_{\Qp^\times}(\oo)$.

Dually, let
$\tilde{P}_{\chi_i^\vee}\coloneqq \tilde{J}_{\chi_i}^\vee\in\fC_T(\oo)$ and
$\tilde{M}_i\coloneqq \Ind_{\bar{P}}^G(\tilde{J}_{\chi_i})^\vee,
\tilde{P}_i\coloneqq \tilde{J}_i^\vee\in\fC_G(\oo)$  for $i=1,2$.
Fix injections
$\iota_i\colon \Ind_{\bar{P}}^G(\tilde{J}_{\chi_i})\hookrightarrow \tilde{J}_i$
as in \eqref{eq:inj_envelope}, 
which induces isomorphisms after passing
to the ordinary parts.
Then the surjections 
$p_i\colon \tilde{P}_i\twoheadrightarrow \tilde{M}_i$
induced by taking the Pontryagin duals
extend to the exact sequences
\begin{equation}\label{eq:exact}
	0\to \tilde{P}_{2}\xrightarrow{\phi_{12}} 
	\tilde{P}_{1}\xrightarrow{p_1} \tilde{M}_1\to 0 \text{ and }
	0\to \tilde{P}_{1}\xrightarrow{\phi_{21}} 
	\tilde{P}_{2}\xrightarrow{p_2} \tilde{M}_2\to 0
\end{equation}
by \cite[Cor 7.7]{pask}.
Moreover
composition with $p_i$
induces the surjective ring homomorphisms
\begin{equation}\label{eq:end_surj}
	\End_{\fC_G(\oo)}(\tilde{P}_i)\twoheadrightarrow
\End_{\fC_G(\oo)}(\tilde{P}_i, \tilde{M}_i)=
\End_{\fC_G(\oo)}(\tilde{M}_i)\cong
	\End_{\fC_T(\oo)}(\tilde{P}_{\chi_i^\vee})\cong
	\oo\llbracket x,y\rrbracket
\end{equation}
by \cite[Cor 7.2]{pask}.

Let $\V\colon \C_G(\oo)\to \Rep_{\Gp}(\oo)$
be the Colmez functor introduced by Pask\={u}nas
in \cite[\S 5.7]{pask},
where 
$\Rep_{\Gp}(\oo)$
is the category of continuous $\Gp$-representations
on compact $\oo$-modules.
The functor is exact and covariant;
and, with notations introduced 
in the previous subsection, satisfies that
$\V(\pi_i^\vee)=\chi_i$,
$\V(\kappa_{ij}^\vee)=\rho_{ij}$,
and $\V(\tilde{P}_j)=\tilde{\rho}_{ij}$
is the universal deformation
with fixed determinant $\det=\zeta\varepsilon$
by \cite[Cor 8.7]{pask}.
Here
$\kappa_{ij}\in \laMod_{G,\zeta}(\oo)$,
for $(i,j)=(1,2)$ or  $(2,1)$,
are the unique non-split extensions
\[
	0\to \pi_2\to \kappa_{12}\to \pi_1\to 0,\quad
	0\to \pi_1\to \kappa_{21}\to \pi_2\to 0
\]
It then follows from \cite[Lem 8.10]{pask} that 
taking the Colmez functor 
$\V$ induces the isomorphisms below.
\begin{equation}\label{eq:end_def}
\begin{split}
	\End_{\fC_{G}(\oo)}(\tilde{P_2})\cong R_{12}\cong R,\quad
	\Hom_{\fC_G(\oo)}(\tilde{P}_2, \tilde{P}_1)\cong R\Phi_{12}\\
	\Hom_{\fC_G(\oo)}(\tilde{P}_1, \tilde{P}_2)\cong R\Phi_{21},\quad
	\End_{\fC_{G}(\oo)}(\tilde{P_1})\cong R_{21}\cong R
\end{split}
\end{equation}
Write $\B=\{\pi_1,\pi_2\}$ 
and $ \tilde{P}_\B=\tilde{P}_1\oplus \tilde{P}_2$,
then $\End_{\fC_G(\oo)}(\tilde{P}_\B)\cong 
\End_{\Gp}(\tilde{\rho}_{12}\oplus \tilde{\rho}_{21})$;
whose center $R$ is also identified with 
the center of the category $\fC_G(\oo)^\B$.

\begin{lem}\label{lem:ker_ord}
	The kernel of the ring homomorphisms
	on $\End_{\fC_G(\oo)}(\tilde{P}_i)\cong R$
	induced by passage to the ordinary parts
	is the image under the above isomorhisms
	of the reducibility ideal $\tau\subset R$.
\end{lem}
\begin{proof}

We first note that the kernel in question 
with that of the surjection in \eqref{eq:end_surj},
since the isomorphism in the middle of which
is also induced by passing to the ordinary parts
and $\Ord_P(\iota_i)$ are isomorphisms.
Thus it suffices to show that 
the image of $\tau\subset$
consists of endomorphisms  in  $\End_{\fC_G(\oo)}(\tilde{P}_i)$
whose compositions with $p_i$ are trivial.
Consider now the diagram
\[
	\begin{tikzcd}
		0 \arrow[r]&
		\tilde{P}_1  \arrow[r,"\phi_{21}"] \arrow[ddr,"0"] &
		\tilde{P}_2 \arrow[r,"p_2"] \arrow[d,"\phi_{12}"] &
		\tilde{M}_2  \arrow[r] & 0 \\
		 &
		%\tilde{P}_1/\tau\tilde{P}_1 \arrow[l] \arrow[d] 
		 &
		\tilde{P}_1  \arrow[d,"p_1"] &
		 & \\
				      &  
				      & \tilde{M}_1  & & 
	\end{tikzcd}
\]
By the adjunction formula \eqref{eq:adj}, 
$\Hom_{\fC_G(\oo)}(\tilde{P}_j,\tilde{M}_i)\cong
\Hom_{\fC_T(\oo)}(\tilde{P}_{\chi_j^\vee}, \tilde{P}_{\chi_i^\vee})=0$
for $i\neq j$
since blocks in $\fC_T(\oo)$ are singletons
(see the discussion in the begining of \cite[\S 7.2]{pask}).
Therefore taking $\Hom(\tilde{P}_j,\cdot)$ to the exact sequences in
\eqref{eq:exact} gives
\[
	\phi_{12}\circ\colon
	\End_{\fC_G(\oo)}(\tilde{P}_2)\cong
	\Hom_{\fC_G(\oo)}(\tilde{P}_2, \tilde{P}_1)\quad
	\phi_{21}\circ\colon
	\End_{\fC_G(\oo)}(\tilde{P}_1)\cong
	\Hom_{\fC_G(\oo)}(\tilde{P}_1, \tilde{P}_2)
\]
Combined with the isomorphisms in \eqref{eq:end_def},
we may assume that $\V(\phi_{ij})$ agree with 
$\Phi_{ij}$ in \eqref{eq:Phi_ij}.

Since $\phi_{12}\circ\phi_{21}\in \End_{\fC_G(\oo)}$
belongs to the kernel of the surjection in \eqref{eq:end_surj}
and is the image of a generator 
of $\tau\subset R$,
it generates the kernel 
since  $R$ is formally smooth of relative dimension  $3$.
\end{proof}




\subsection{injective objects}

In this subsection 
let $N\in\laMod_{G,\zeta}(\oo)$ be an object
satisfying the assumption
\begin{equation}\label{cond:adm_inj}\tag{\text{adm-inj}}
	N\in \aMod_{G,\zeta}(\oo)\cap \laMod_{G,\zeta}(\oo)^\B
	\text{ and is injective as a $\GL_2(\Zp)$-representation}.
\end{equation}
Here $\B=\{\pi_1,\pi_2\}$ 
is the block consisting of the two irreducible representations
introduced previously.



\begin{lem}
	When $N$ satisfies \eqref{cond:adm_inj},
	there exists a projective resolution
	for $N^\vee\in \fC_G(\oo)^\B$ 
	as follows 
	for $\tilde{P}_\B\coloneqq \tilde{P}_1\oplus \tilde{P_2}$ and
	some non-negative integer $r$.
\begin{equation}\label{eq:resolution}
0\to \tilde{P}_\B^r\to \tilde{P}_\B^r\to N^\vee\to 0
\end{equation}
\end{lem}
\begin{proof}
Denote $\Ext^i_{\laMod_{G,\zeta}(\oo)}$
by $\Ext^i_G$ for short 
and apply which
to the exact sequences in \eqref{eq:exact} gives
\begin{equation*}
    \begin{tikzcd}[row sep=2ex]
        \Ext^{i-1}_{G}(\pi, N)\arrow[r] &
        \Ext^{i}_{G}(\text{c-ind}_{KZ}^G\sigma, N)\arrow[r] \arrow[d,symbol={=}] &
        \Ext^{i}_{G}(\text{c-ind}_{KZ}^G\sigma, N)\arrow[r] \arrow[d,symbol={=}] &
        \Ext^{i}_{G}(\pi, N)\\ 
        & \Ext^i_K(\sigma ,N) &
         \Ext^i_K(\sigma ,N) &
    \end{tikzcd}
\end{equation*}
Since $N$ is injective as a $K$-representation, 
the long exact sequence reduces to 
\begin{equation*}
    0 \to \Hom_G(\pi_i,N)\to \Hom_K(\sigma_i,N)\to \Hom_K(\sigma_i,N)\to \Ext^1_G(\pi_i,N)\to 0
\end{equation*}
It follows that $a_i\coloneqq \dim_k\Hom_G(\pi_i,N)=\dim_k \Ext^1_G(\pi_i,N)$,
which are finite since $N$ is admissible.

Let $\soc(N)=\pi_1^{a_1}\oplus \pi_2^{a_2}$
be the socle  of $N$,
the injective envelope 
$\soc(N)\hookrightarrow \tilde{J}=\tilde{J}_1^{a_1}\oplus \tilde{J}_2^{a_2}$
in $\laMod_{G,\zeta}(\oo)$
factors through an injective morphism 
$\phi_0\colon N\to \tilde{J}$
since the inclusion $\soc(N)\hookrightarrow N$
is essential.
Apply the same construction 
to $\soc(\coker(\phi_0))$
and use $\dim_k\Hom_G(\pi_i, \coker(\phi_0))=\dim_k\Ext^1_G(\pi_i, N)=a_i$
gives another injective morphism
$\phi_1\colon \coker(\phi_0)\to \tilde{J}$,
which is also surjective as
\[
	\Hom_G(\pi_i,\coker(\phi_1))
	\cong \Ext^1_G(\phi_i,\coker(\phi_0))
	\cong \Ext^2_G(\pi, N)=0
\]
Now the lemma follows by picking
$r=\max\{a_1,a_2\}$ and taking the Pontryagin dual.
\end{proof}

Let $A\colon \tilde{P}_\B^r\to \tilde{P}_\B^r$ denote the morphism
in the  resolution \eqref{eq:resolution},
which can be represented by the matrix
$A=\smat{A_{11} & A_{12}\Phi_{12}\\A_{21}\Phi_{21} & A_{22}}$,
where $A_{ij}\in M_r(R)$,
through the isomorphisms in \eqref{eq:end_def}.
Denote by $\bar{A}_{ij}\in M_r(R^{\red})$
the reduction of the matrices modulo $\tau$.
Lemma \ref{lem:ker_ord} shows that 
the resolution induces the right exact sequence
\begin{equation}\label{eq:exact_ord}
	\tilde{P}_{\chi_2^\vee}^r\oplus \tilde{P}_{\chi_1^\vee}^r
	\xrightarrow{\overline{A}_{11}\oplus\overline{A}_{22}}
	\tilde{P}_{\chi_2^\vee}^r\oplus \tilde{P}_{\chi_1^\vee}^r
	\to (\Ord_PN)^\vee\to 0
\end{equation}


\begin{prop}    
	The sequence \eqref{eq:exact_ord}
	is also left exaxt;
	and the matrices $ \bar{A}_{ii}\in M_r(R^{\red})$
	are injective.
\end{prop}
\begin{proof}
	The representation $(\Ord_PN)^\vee\in \fC_T(\oo)$
	is finitely generated over 
	$\oo\llbracket (1+p\Z_p)\rrbracket\cong \oo\llbracket X\rrbracket$
	since $\Ord_P$ preserves admissibility.
	Taking $\Hom_{\fC_T(\oo)}(\tilde{P}_{\chi_i^\vee},\cdot)$
	to \eqref{eq:exact_ord}
	gives the exaxt sequence of $\oo\llbracket x,y\rrbracket$-modules
\begin{equation*}
	\End_{\fC_T(\oo)}(\tilde{P}_{\chi_i^\vee}^r)\to 
	\End_{\fC_T(\oo)}(\tilde{P}_{\chi_i^\vee}^r)\to 
	\Hom_{\fC_T(\oo)}(\tilde{P}_{\chi_i^\vee}, (\Ord_PN)^\vee)\to 0
\end{equation*}
	We note that the first two terms in which are 
	isomorphic to $\oo\llbracket x,y\rrbracket^{\oplus r}$;
	and the last term is torsion over $\oo\llbracket x,y\rrbracket$,
	since there is no injective ring homomorphism from
	$\oo\llbracket x,y\rrbracket$ to $\oo\llbracket X\rrbracket$.
	It is now clear that $\bar{A}_{ii}$
	must be injective,
	for otherwise a contradiction occurs after 
	tensor with the field of fraction of 
	$\oo\llbracket x,y\rrbracket$.
\end{proof}

\begin{cor}
	When $N$ satisfies \eqref{cond:adm_inj},
	the $\End_{\fC_{G}(\oo)}(\tilde{P}_i)$-module
	$\Hom_{\fC_G(\oo)}(\tilde{P}_2, N^\vee)$
	has no $\tau$-torsion 
	under the isomorphism $\End_{\fC_{G}(\oo)}(\tilde{P}_2)\cong R$
	in \eqref{eq:end_def}.
\end{cor}
\begin{proof}
	Identify the center of $\End_{\fC_{G}(\oo)}(\tilde{P}_\B)$ 
	with $R$ by the isomorphisms
	in \eqref{eq:end_def}
	and fix a generator $x$ of the reducibility ideal  $\tau\subset R$.
	The generator acts by, up to an invertible elements,
	$\phi_{ij}\circ\phi_{ji}$ on $\tilde{P}_i$.
	Thus $\tilde{P}_\B[\tau]=0$,
	since by definition $\varphi_{ij}\circ\varphi_{ji}$ are injective.
	Then apply 
	$\Hom_{\fC_G(\oo)}(\tilde{P}_2,\cdot)$
	and the snake lemma to the diagram
    \begin{equation*}
    \begin{tikzcd}
        0 \arrow[r] & \tilde{P}_\B^{\oplus r} 
	\arrow[d,"x",hookrightarrow] \arrow[r,"A"] & 
	\tilde{P}_\B^{\oplus r} 
	\arrow[d,"x",hookrightarrow] \arrow[r] & 
	N^\vee \arrow[d,"x"] \arrow[r] & 0 \\ 
        0 \arrow[r] & \tilde{P}_\B^{\oplus r}
	\arrow[r,"A"] & \tilde{P}_\B^{\oplus r}
	\arrow[r] &N^\vee  \arrow[r] & 0 
    \end{tikzcd}
\end{equation*}
results in the following isomorphism,
whose right-hand-side
is trivial by the previous proposition.
\[
\Hom_{\fC_G(\oo)}(\tilde{P}_2, N^\vee)[\tau]\cong 
\ker\left(
	\Hom_{\fC_G(\oo)}(\tilde{P}_2, \tilde{P}_\B^{\red})^{\oplus r}
\xrightarrow{\smat{\bar{A}_{11}& \bar{A}_{12}\Phi_{12}\\& \bar{A}_{22}}}
\Hom_{\fC_G(\oo)}(\tilde{P}_2, \tilde{P}_\B^{\red})^{\oplus r} \right)
\]\qedhere
\end{proof}

\begin{cor}
	When $N$ satisfies \eqref{cond:adm_inj}, 
	there exists an isomorphism between $R^{\red}$-modules
    \begin{align}
	    \Hom_{\fC_{G}(\oo)}(\tilde{P}_2,(N^\vee)^{\red})
	    &\cong
	    \Hom_{\fC_{T}(\oo)}(\tilde{P}_{\chi_1^\vee}, (\Ord_PN)^\vee)\oplus
	    \Hom_{\fC_{T}(\oo)}(\tilde{P}_{\chi_2^\vee},(\Ord_PN)^\vee)\\
	    &\cong
	    ((\Ord_PN)_{U_p\equiv \chi_2\omega^{-1}})^\vee\oplus
	    ((\Ord_PN)_{U_p\equiv \chi_1\omega^{-1}})^\vee
    \end{align}
\end{cor}
\begin{proof}
	Denote $\Hom_{\fC_{G}(\oo)}$ by $\Hom_G$ for short.
	We decompse the resulting sequence of cokernels
	from the proof of the previous corollary into the following diagram
\begin{equation*}
    \begin{tikzcd}
	    0 \arrow[r]& \Hom_{G}(\tilde{P}_2, \tilde{P}_2^{\red})^{\oplus r}
	    \arrow[r,"\bar{A}_{11}"] \arrow[d]&
	    \Hom_{G}(\tilde{P}_2, \tilde{P}_2^{\red})^{\oplus r}
	    \arrow[d] &&\\
	    0\arrow[r] & \Hom_{G}(\tilde{P}_2, \tilde{P}_\B^{\red})^{\oplus r}
	    \arrow[r] 
	    \arrow[d] &
	    \Hom_{G}(\tilde{P}_2, \tilde{P}_\B^{\red})^{\oplus r}
	    \arrow[d] \arrow[r]&
	    \Hom_{G}(\tilde{P}_2, (N^\vee)^{\red})\arrow[r]&0\\
	    0\arrow[r] & \Hom_{G}(\tilde{P}_2, \tilde{P}_1^{\red})^{\oplus r}
	    \arrow[r,"\bar{A}_{22}"] &
	    \Hom_{G}(\tilde{P}_2, \tilde{P}_1^{\red})^{\oplus r}&&
    \end{tikzcd}
\end{equation*}
But by the exactness of \eqref{eq:exact_ord}
and the proof of the proposition thereafter,
the cokernels on the first and last rows
are isomorphic, as  $R^{\red}$-modules,
to $\Hom_{\fC_T(\oo)}(\tilde{P}_{\chi_2^\vee}, (\Ord_PN)^\vee)$ and
$\Hom_{\fC_T(\oo)}(\tilde{P}_{\chi_1^\vee}, (\Ord_PN)^\vee)$ respectively.
\end{proof}  

\subsection{unitary completion}

Recall that $R$ is the universal deformation ring
of the pseudo-representation
$\chi_1+\chi_2$, with fixed determinant  $\zeta\varepsilon$;
and that  $R$
is also isomorphic to the center
of the category  $\fC_G(\oo)^\B$,
for  $\B=\{\pi_1,\pi_2\}$ 
introduced in the previous subsections.

Let $\fn$ be a maximal ideal of  $R[\frac{1}{p}]$
with residue field  $L$ and 
$T_\fn\colon \Gp\to L$ 
be the corresponding pseudo-representation.
Let  $\Irr(\fn)$
be the set of irreducible objects in  $\Ban_{G,\zeta}(L)^\B_{\fn}$.

By \cite[Cor 8.15]{pask}, 
if $T_\fn=\psi_1+\psi_2$,
where  $\psi_i\colon \Gp\to L^\times$
are continuous homomorphisms, then  
\begin{equation}\label{eq:comple1}
	\Irr(\fn)=\{(\Ind_P^G\psi_1\otimes\psi_2\varepsilon^{-1})_{cont},
	(\Ind_P^G\psi_2\otimes\psi_1\varepsilon^{-1})_{cont}\}
\end{equation}

And by \cite[Cor 8.14]{pask}, 
if $T_\fn$ is irreducible over the residue field $L$, 
then $\Irr(\fn)=\{\Pi\}$ contains only one irreducible object,
which satisfies that $\mtr\mathbf{V}(\Pi)=T_\fn$.
Moreover, by \cite[Thm. 1.3]{CDP},
when $\mathbf{V}(\Pi)$ is crystalline with Hodge-Tate weights $-a,-a-b$,
and $\pi$ is the smooth admissible irreducible
$\GL_2(\Qp)$-representation
corresponding to the Weil-Deligne representation
associated to  $D_{\cris}(\mathbf{V}(\Pi)\vert_{\Gp})$
under the Hecke correspondence
(if the Weil-Deligne representation is $\psi_1+\psi_2$,
then $\pi$ is isomorphic to 
the (un-normalized) induction $\Ind_B^G(\psi_1\otimes\psi_2||^{-1})$,
then $\Pi$ is the universal unitary completion
of  $\pi\otimes(\Sym^{b-1}\otimes \det^a)$


\subsection{computation}

Let $\rho$ be the Galois representation
associated to  $\pi$, that satisfies
\[
	\WD(\rho_v)=\Rec(\pi_v||^{-1/2})
\]
and let $\B$ be the block associated to the reduction
of  $\rho\otimes\varepsilon$.

If $\mtr\rho_v=\psi_1+\psi_2$ is reducible,
where $\psi_i$ are respectively of weight
$w$ and  $w+k-1$
then 
\[
	\WD(\rho)=\psi_1\varepsilon^w||^{-w}+
	\psi_2\varepsilon^{w+k-1}||^{1-k-2}
\]
Then $\pi_v$ is isomorphic to the un-normalized induction
$\Ind(\mu_1\otimes\mu_2||^{-1})_{\sm}$, where
\begin{align*}
	\mu_1&=\psi_1\varepsilon^{w}||^{1-w} &
	\val_p(\mu_1(p))&=w-1=(w+k-2)-(k-1)\\
	\mu_2&=\psi_2\varepsilon^{w+k-1}||^{2-k-w} &
	\val_p(\mu_2(p))&=w+k-2
\end{align*}
Since $(\Sym^{k-2}\otimes\det{}^w)^*\cong \Sym^{(k-1)-1}\otimes\det{}^{2-k-w}$
and $\varepsilon(x)=x|x|$,
by \cite[Thm 12.3]{pask}, 
the universal unitary completion
of $\pi_v\otimes(\Sym^{k-2}\otimes\det{}^w)^*$
is isomorphic to $\Ind_B^G(\psi)_{\cont}$, where
\[
	\psi(\smat{a&*\\&d})=\mu_2(a)a^{2-k-w}\mu_1(d)|d|^{-1}d^{(k-1)+(2-k-w)-1}
	=\psi_2\varepsilon(a)\psi_1(d)
\]
Note that indeed 
$\Ind(\psi_2\varepsilon\otimes\psi_1)_{cont}=
\Ind((\psi_2\varepsilon)\otimes(\psi_1\varepsilon)\varepsilon^{-1})$.

\subsection{finite condition}

Let $G$ be a  $p$-adic analytic group
and  $V\in Mod_G(A)$, define 
 \[
	V_{Z-fin}=
	\{v\in V\mid \text{$A[Z]$-submodule generated by  $v$
	is finitely generated over  $A$}\}
\]
\begin{lem}
	For $V\in Mod_G^{sm}(A)$
	\begin{enumerate}[label=(\alph*)]
		\item finite length and admissible
		\item finitely generated over $A[G]$
			and admissible, 
		\item finite length and $Z$-finite
	\end{enumerate}
	Then $(i)$ implies $(ii), (iii)$
	and $(ii)$ implies  $Z$-finite.
\end{lem}

\begin{rem}
	If $G=G_1\times G_2$ and  $G_2\subset Z=Z_G$,
	then  $(A[G]-fg + G-adm)$ 
	implies  $(A[G_1]-fg + G_1-adm)$ 
	Thus when
	$G=\prod\GL_2(\Qp)\times T$,
	then locally admissible 
	implies locally of finite length
\end{rem}

\section{completed cohomology}

In this section, 
let $\F$ be a totally real number field
and  $\A=\A_\F$ be the ring of adeles.
Let $I_\F$ denote $\Hom(\F,\C)$
and $S_p$ denote the set of primes of $\F$ above $p$.
Fix an isomorphism $\iota\colon \C\cong \bar{\Q}_p$,
which induces a map $I_\F\to S_p$
sending  $\sigma\in I_F$
to the prime  $v_\sigma$
corresponding to $\iota\circ \sigma\colon \F\to \bar{\Q}_p$.

Let  $\GG$ be a totally definite reductive group over  $\F$,
such that  $\GG(\C)\cong \GL_n(\C)$
and $\GG(\F_v)\cong \GL_n(\F_v)$
for all  $v\in S_p$.
Identify $\GG(\F_v)$
and  $G_v\coloneqq \GL_n(\F_v)$ by the above isomorphisms,
we define 
\[
	G_p\coloneqq\prod_{v\in S_p}G_v,\quad
	K_p\coloneqq\prod_{v\in S_p}K_v,\quad
	K_v\coloneqq\GL_n(\oo_v).
\]
When $U=\prod_{v\in\finite}U_v\subset \GG(\A_f)$
is an open compact subgroup, 
we will write 
$U_p=\prod_{v\notin S_p}U_v$,
$U_p=\prod_{v\in S_p}U_v$,
and always assume $U_p\subset K_p$.
Let $\tau\colon U_p\to \Aut(W_\tau)$
be a continuous representation on a finite  $A$-module  $W_\tau$,
and $\psi\colon \A_f^\times/\F_+^\times\to A^\times$ 
be a continuous character satisfying
$\tau^{-1}\vert_{U\cap Z_{\GG}(\A_f)}=\psi|_{U\cap Z_{\GG}(\A_f)}$,
define
\begin{align}
S_{\tau}(U,A)&=
\left\{ f: \GG(\F)\backslash \GG(\A_f)/U^p \rightarrow W_\tau 
\mid f(gu)=\tau(u_p^{-1})\cdot f(g), u\in U\right\} \\
S_{\tau,\psi}(U,A)&=\left\{
f\in S_{\tau}(U,A)
\mid f(zg)=\psi(z)\cdot f(g), z\in Z_{\GG}(\A_f)\right\} 
\end{align}
It is well-known that 
$\GG(\F)\backslash \GG(\A_f)/U$ is a finite set.
We futher assume that $U^p$ satisfies the assumption
\begin{equation}\label{cond:small}\tag{\text{small}}
	\GG(\A_f)=\bigsqcup_{i\in I}
	\GG(\F)t_i (U^pK_p),\quad
	\GG(\F)\cap t_i(U^pK_p)t_i^{-1}=\{1\} \text{ for all } i\in I
\end{equation}
\begin{lem}\label{lem:small}
	Under the assumption \eqref{cond:small},
	$S_\tau(U,A)$ and $S_{\tau,\psi}(U,A)$
	are isomorphic as $A$-modules
	to finite direct sums of $W_\tau$.
\end{lem}
\begin{proof}
	By the assumption,
	the map sending $f\in S_\tau(U,A)$ to 
	$(f(t_i))_{i\in I}$ is an isomorphism.
	The case for $S_{\tau,\psi}(U,A)$ is identical,
	after replacing the set $\{t_i\}$
	by a set of representatives of 
	$\GG(\F)\backslash \GG(\A_f)/UZ_\GG(\A_f)$.
\end{proof}

\subsection{Functor of ordinary parts and ordinary forms}

Let $P=\prod_{v\in S_p}P_v\subset G_p$ be a product 
of standard parabolic subgroups $P_v\subset \GL_n(\oo_v)$.
In particular, let  $B=\prod_{v\in S_p}B_v$
be the product of the upper triangular Borel subgroups.
Let $P=MN$ and  $B=TU$ denote the Levi decompositions,
$\bar{N}$ and $\bar{U}$ denote the opposite unipotent subgroups.
Since the compact open subgroups
$K(r)=\{k\in K_p\mid k\equiv 1\mod p^r\}$ 
for $r\geq 1$
admits Iwahori decomposition
\[
	\bar{N}_r\times M_r\times N_r\to K(r)\quad
	\bar{N}_r=\bar{N}\cap K(r),\,
	M_r=M\cap K(r),\,
	N_r=N\cap K(r)
\]
following \cite[\S 3.3]{emeI},
we define the open compact subgroups
$H_{c,b}=\bar{N}_cM_bN_0$
for $c\geq b\geq 0$,
where $M_0=M\cap K_p$ and
$N_0=N\cap K_p$.

\begin{defn}
	For each $v\in S_p$
	let $T_v\subset \GL_n(\F_v)$
	be the diagonal torus and 
	identify  $X^*(T_v)=\Z^n$.
	Given $\lambda\in \Z^n$
	such that $\lambda_1\geq \cdots\geq \lambda_n$,
	let  $w_0$ be the longest Weyl element, define
	\begin{equation}
	\pi_\lambda=\Ind_{T(B\cap M)}^M(w_0\lambda),\qquad
	\tau_\lambda=\Ind_B^G(w_0\lambda)\cong 
	\Ind_P^G(\pi_\lambda).
	\end{equation}
	More generally,
	when $\lambda=(\lambda_{\sigma})\in \Z[I_\F]^n$
	satisfies 
	$\lambda_{\sigma,1}\geq \lambda_{\sigma,2}\geq \cdots\lambda_{\sigma,n}$
	for all $\sigma\in I_\F$, 
	write 
	$\pi_\lambda=\otimes_{I_\F}\pi_{\lambda_{\sigma}}$ and 
	$\tau_\lambda=\otimes_{I_\F}\tau_{\lambda_{\sigma}}$
	for the algebraic representations of $M$ and  $G_p$
	respectively given by 
	\[
	\prod_{v\in S_p}P_v(\F_v)\to 	
	\prod_{v\in S_p}\prod_{v=v_\sigma}P_v(E)\quad
	\prod_{v\in S_p}\GL_n(\F_v)\to 	
	\prod_{v\in S_p}\prod_{v=v_\sigma}\GL_n(E)\quad
	\]
	Then for $U$ as above, we write 
	$S_{\tau}(U,A)=S_{\lambda}(U,A)$ when $W_\tau=\tau_\lambda(A)$, and
	$S(U,A)=S_{\lambda}(U,A)$ when $\lambda$ is the trivial weight.
	Note that $S(U,A)$ is none other than the set of 
	$A$-valued functions on  $\GG(\F)\backslash \GG(\A_f)/U$.
\end{defn}


Let $Z_M^+=\{z\in Z_M\mid zN_0z^{-1}\subset N_0\}$.
the action
\[
	\langle z\rangle f(g)\coloneqq
	(w_0\lambda)(z^{-1})\sum_i (x_iz)\cdot f(gx_iz)
\]
where $\{x_i\}$ is 
as set of representatives for $N_0/zN_0z^{-1}$,
defines an endomorphism on $f\in S_\lambda(U^pH_{c,b},A)$
and is equivariant with respect to the inclusion
$S_\lambda(U^pH_{c,b},A)\subset S_\lambda(U^pH_{c',b'},A)$,
where  $c'\geq c$ and  $b'\geq b$.
\begin{defn}
Let $B\subset \End_\oo(S_\lambda(U^pH_{c,b},A))$ 
be the commutative finite $\oo$-subalgebra generated by 
$ \langle z\rangle$ for $z\in Z_M^+$.
Thus $B=\prod_{\fm \text{maximal}}B_\fm$.
A maximal ideal $\fm\subset B$ is said to be ordinary
if $ \langle z\rangle\notin \fm$ for all $z\in Z_M^+$, we then define 
the subspace of $P$-ordinary forms by
\[
	S_\lambda^{P-\ord}(U^pH_{c,b},A)\coloneqq\prod_{\fm \text{ ordinary}}
	S_\lambda(U^pH_{c,b},A)_{\fm}\subset
	S_\lambda(U^pH_{c,b},A).
\]
\end{defn}

On the other hand, 
let $S(U^p,A)=\varinjlim_{U_p}S(U^pU_p,A)$,
where $\{U_p\}$ is the filtered system of 
all the compact open subgroups in $K_p$ under inclusion relation,
for $m\in M^+$ Emerton has defined in \cite{emeI} the action
\[
	h_M(m)f(g)=\sum_i f(gx_im)
\]
where $\{x_i\}$ is 
as set of representatives for $N_0/mN_0m^{-1}$
on $f\in S(U^p,A)^{N_0}$ 
and the functor of ordinary parts as
the functor of ordinary parts is defined as
\[
	\Ord_P\colon
	\Mod^{\sm}_{G_p}(A)\to \Mod^{\sm}_M(A)\quad
	\Ord_P(V)=\Hom_{A[Z_M^+]}(A[Z_M], V^{N_0})_{Z_M-\fin}
\]

The relation between the two definitions
is provided by the following "weight independence" result
generalizaing \cite[Prop 2.22]{ger}.
\begin{prop}
	For $c\geq r$ There exists an $M_0$-equivariant isomorphism
	\[
		\epsilon_\lambda
		\colon S_{\lambda}^{P-\ord}(U^pH_{c,c}, \oo/p^r)\cong 
		\Hom_{\oo}(\pi_\lambda^\vee(\oo/p^r),
		\Ord_PS(U^p,\oo/p^r)^{M_c}).
	\]
	Here $m\in M_0$ acts on  $f\in S_\lambda^{P-\ord}(U^pH_{c,c},\oo/p^r)$
	through $[m\cdot f](g)=m\cdot f(gm)$;
	and on the right hand side through 
	$\Ord_PS(U^p,\oo/p^r)$,
	note that $M_c\subset M_0$ is a normal subgroup.
\end{prop}
\begin{proof}
	Let $ev\colon \tau_\lambda\to \pi_\lambda$ 
	be the evaluation at the identity, which is 
	$H_{r,0}$-equivariant over $\oo/p^r$.
	Define 
	\[
	\epsilon_{\lambda}\colon S_\lambda(U^pH_{c,c}, \oo/p^r)\to 
	\Hom_{\oo}(\pi_\lambda^\vee(\oo/p^r), S(U^pH_{c,c},\oo/p^r))\qquad
	\epsilon_{\lambda}(\tilde{f})(g)=
	ev(\tilde{f}(g)).
	\]
	That $\epsilon_\lambda(\tilde{f})\in 	
	\Hom_{\oo}(\tau_\lambda^\vee(\oo/p^r), S(U^pH_{c,c},\oo/p^r))$
	follows from the above equivariance.
	It is easily verified that 
	the map is $M_0$-equivariant.
	Moreover, since
	$(w_0\lambda)(z)=\lambda'(z)$
	for any weight $\lambda'\subset \pi_\lambda$,
	the map is also $Z_M^+$-equivariant.

	To construct a map in the reversed direction,
	let $\alpha\in Z_M^+$ be the product
	of a finite set of generators of $Z_M^+$
	and let $ \{x_i\}\in N_0$
	be a set of represntatives for $N_0/\alpha N_0\alpha^{-1}$.
	Let $\iota\colon \pi_\lambda\hookrightarrow \tau_\lambda$
	be the incusion of the weight vectors and define 
	\[
	\varphi(f)(g)\coloneqq \sum_i x_i\cdot \iota(f(gx_i\alpha))	
	\]
	The same argument in loc.cit shows 
	$\varphi(f)\in S_\lambda(U^pH_{c,c},\oo/p^r)$
	and the commutative diagram 
	\[
	\begin{tikzcd}
		S_\lambda(U^pH_{c,c},\oo/p^r)
		\arrow[r,"\epsilon_{\lambda}"]
		\arrow[d,"\langle\alpha\rangle"]
		& \Hom_\oo(\pi_\lambda^\vee(\oo/p^r), S(U^pH_{c,c},\oo/p^r))
		\arrow[d,"h_M(\alpha)"]
		\arrow[dl,"\varphi"]\\
		S_\lambda(U^pH_{c,c},\oo/p^r)
		\arrow[r,"\epsilon_{\lambda}"]
		& \Hom_\oo(\pi_\lambda^\vee(\oo/p^r), S(U^pH_{c,c},\oo/p^r))
	\end{tikzcd}	
	\]
	Thus $\epsilon_{\lambda}$ is an isomorphism
	after localizing at the ordinary primes. 
\end{proof}



\begin{prop}
	After restriction, 
	$\Ord_P(S_\psi(U^p,E/\oo))$ is injective
	as an object in $\Mod^{\sm}_{M_0}(\oo)$.
\end{prop}
\begin{proof}
	Following the strategy of the proof of 
	\cite[Prop 3.2.4]{pan}, it suffices to show the surjectivity of
	\[
		\Hom_{\oo[M_0]}(\pi,\Ord_P(S_\psi(U^p,E/\oo)))\to 
		\Hom_{\oo[M_0]}(\pi',\Ord_P(S_\psi(U^p,E/\oo)))
	\]
	when $\pi_{1}\hookrightarrow \pi$ 
	is injective between $M_0$-admissible
	representations that are finite $\oo$-modules.
	By definition
	\begin{multline*}
		\Hom_{\oo[M_0]}(\pi,\Ord_P(S_\psi(U^p,E/\oo)))=
		\Hom_{\oo[M_0]}(\pi,
		\Hom_{\oo[Z_M^+]}
		(\oo[Z_M], S_\psi(U^p,E/\oo)^{N_0}))\\=
		\Hom_{\oo[Z_M^+]}(\oo[Z_M],
		\Hom_{\oo[M_0]}(\pi, S_\psi(U^p,E/\oo)^{N_0}))=
		\Hom_{\oo[Z_M^+]}(\oo[Z_M],
		S_{\psi,\pi^\vee}(U^pH_{c,0})
	\end{multline*}
	where the first equality follows from the $\oo$-finiteness of $\pi$,
	as any homomorphism in above factors through some 
	$S_\psi(U^pU_p,p^{-s}\oo/\oo)$,
	for which
	the $Z_M$-fintieness condition is automatic
	by \cite[Lem 3.1.5]{emeI};
	and the section equality comes from 
	extending $\pi$ from  $M_0$ to  $H_{c,0}$ via
	\[
		H_{c,0}\to P \mod p^c\to M_0/M_c
	\]
	suppose the $M_0$-actions on  $\pi$ and  $\pi_1$
	factor through  $M_0/M_c$.
\end{proof}




We assume from now on that 
there exists a prime $v\in S_p$
such that  $\F_v\cong \Qp$,
let  $\sigma\in I_\F$
denote the unique embedding such that  $v_\sigma=v$.
We also assume that 
the parabolic subgroup $P\subset G_p$ is given by 
$P=P_v\times\prod_{v'\neq v}B_{v'}$,
where $B_{v'}\subset \GL_n(\oo_{v'})$
are the Borel subgroups
and the Levi component of $P_v\subset GL_n(\oo_v)$
is the product of $\GL_2(\Q_p)$ and a split torus.
In other word, $M$ is isomorphic to the product  
of  $G=\GL_2(\Qp)$ and a split torus  $T$,
and  $\Ord_P(S_\psi(U^p,E/\oo))\in \aMod_M(\oo)\cap \laMod_{G}(\oo)$.
\begin{defn}
	We define the $P$-ordinary completed homology and cohomology by
	\begin{equation*}
		M_\psi(U^p)=\Hom_\oo(\Ord_P(S_\psi(U^p,E/\oo)),E/\oo),\qquad
		S_\psi(U^p)=\Hom_\oo(E/\oo, \Ord_P(S_\psi(U^p,E/\oo))).
	\end{equation*}
	We also write $S_{\psi}(U^p)_E=S_\psi(U^p)\otimes_\oo E$.
	It is immediately that 
	$M_\psi(U^p)\in \fC_{G,\zeta}(\oo)$,
	where $\zeta=\psi\vert_{\F_v^\times}$.
	It is also easily verified that 
	\[
		M_\psi(U^p)\cong \Hom_\oo(S_\psi(U^p),\oo),\qquad
		S_\psi(U^p)\cong \Hom_\oo^{\cts}(M_\psi(U^p),\oo),
	\]
	here $\Phi\in \Hom_\oo(M_\psi(U^p),\oo)$ 
	is continuous if 
	$\Phi \mod p^n$ factors through
	$S_{\psi}(U^pU_p,E/\oo)^\vee$ for some $U_p$
	for any positive integer $n$
	($U_p$ depedents on  $n$).
\end{defn}


\begin{prop}
Assume that $\psi(a_v)=\sigma(a_v)^w$
for  $a_v\in \oo_v^\times$,
then $S_\psi(U^p)_E^{\alg}\subset S_\psi(U^p)_E$
is dense.
\end{prop}
\begin{proof}
	Reduced to $C_\psi(K_p,E)$ use the  $K_p$-injective properties.
\end{proof}
\[
S_\psi(U^p)_E^{\alg}=
\Image\left(
	\bigoplus_{\lambda}\Hom_{E[K\times T_0]}(W_{\lambda,E}^*, 
	S_\psi(U^p)_E)
	\otimes_EW_{\lambda,E}^*\xrightarrow{ev}
	S_\psi(U^p)_E
\right)
\]

\begin{lem}
	Let $S_{\lambda,\psi}^{P-\ord}(U^pK_p)_E
	\coloneqq \Hom_{\oo[Z_M^+]}
	(\oo[Z_M], S_{\lambda,\psi}(U^pK_p,\oo))\otimes_\oo E$,
	then
	\[
		\Hom_{\oo[M_0]}(\pi_\lambda^*, S_\psi(U^p)_E)\cong
		S_{\lambda,\psi}^{P-\ord}(U^pK_p,E)
	\]
\end{lem}
\begin{proof}
	We first note that 
	$S_\psi(U^p)\colon \varprojlim_{n}\Ord_PS_\psi(U^p, \oo/p^n)$,
	thus 
	\[
		\Hom_{\oo[M_0]}(\pi_\lambda^\vee(\oo),S_\psi(U^p)\cong
		\varprojlim_{n}\Hom_{\oo[M_0]}(\pi^\vee(\oo/p^n),
		\Ord_PS_\psi(U^p,\oo/p^n))
	\]
	which induces an element in 
	$\varprojlim_n S_{\psi,\lambda}^{P-\ord}(U^pH_{n,n},\oo/p^n)^{M_0}
	=\varprojlim_n S_{\psi,\lambda}^{P-\ord}(U^pH_{n,0},\oo/p^n)$,
	which gives rises to a $P$-ordinary form in 
	$S_{\psi,\lambda}^{P-\ord}(U^pH_{n,0},\oo)$.
\end{proof}



\subsection{Hecke algebras}

When $v=w\bar{w}$ is a split place
$\GG(\F_v)\cong \GL_2(\F_v)$ and 
$U_v\cong \GL_2(oo_v)$, we define the Hecke algebras
\[
	T_v=[U_v\smat{\varpi_v&\\&1}U_v]=
	\sum_{b\in \oo_v/(\varpi_v)}\smat{\varpi_v&b\\&1}U_v
\]
\begin{defn}
	Given $S_{\tau,\psi}(U,A)$ as above, 
	let $\TT^S_{\tau,\psi}(U,A)\subset \End_A(S_{\tau,\psi}(U,A))$
	be the $\oo$-subalgebra generated by  $T_v$
	for  split $v$ not in  $S$,
	which acts faithfully on $S_{\tau,\psi}(U,A)$
	by definition. 
	We then define 
	\[
		\TT^S_\psi(U^p)=\varprojlim_{U_p}
		\TT_{\psi}(U^pU_p, E/\oo)
	\]
\end{defn}

\begin{rem}
	Prove the reducedness and show existence of 
	pseudo-representation.
	\cite[Prop 2.27]{ger}
\end{rem}



\begin{lem}
	Since 
 $S_{\tau\otimes A/I, \psi}(U, A/I)\cong S_{\tau, \psi}(U, A)\otimes A/I$,
 \[
	 \ker(\TT_{\tau,\psi}^S(U,A)\otimes A/I\to \TT_{\tau,\psi}^S(U,A/I))
 \]
 is nilpotent.
\end{lem}

\begin{defn}
	\[
		T_{(k,w),\psi}(U)\colon G_{F,S}\to \TT^S_{\tau,\psi}
		(U,\oo)\quad
		\Fr_v\mapsto T_v
	\]
	for $\tau=\tau_{(k,w)}$
	and $\psi=\tau^{-1}\vert_{U\cap \A_f^\times}$.
	Thus  $\TT^S$ is independent of  $S$
\end{defn}
\begin{proof}
	This used that the Hecke algebra is reduced.
\end{proof}

\begin{defn}
	$\TT_\psi(U^p)$ acts faithfully on  $S_\psi(U^p)$
	and thus should also be reduced.
\end{defn}

When $V_p\subset U_p$ is a normal subgroup
\begin{align*}
&S(U^p,E/\oo)=\varinjlim_{U_p} S(U^pU_p, E/\oo)\to&
&S(U^pV_p,\oo/(\varpi^s))\to&
&S(U^pU_p,k)=
S(U^pV_p,\oo/(\varpi^s))\otimes_{\oo_s)[U_p/V_p]}k\\
&\TT(U^p)\to&
&\TT(U^pV_p,\oo/(\varpi^s))\to&
&\TT(U^pU_p,k)
\end{align*}

Thus
$\TT(U^p)\cong\TT(U^p)_{\fm_1}\times\cdots
\times \TT(U^p)_{\fm_r}$
is semi-local.

On the other hand, use
\[
	\Psi\colon \Gal\to \TT(U^pV_p,\oo)
	\Fr_v\mapsto T_v\quad
	\det\Psi(\Fr_v)=\varepsilon^{-1}(\Fr_v)
	[(\smat{\varpi_v&\\&\varpi_v})]
\]
and build up big pseudo-representation
$\Psi\colon \Gal\to \TT(U^p)$.

\subsection{compatibility}


\begin{rem}
	Will prove the compatibility on 
	$\Ord_P(S_\psi(U^p,E/\oo))^{T_0}$ first.
	On this we have the density of 
	algebraic vectors for sure.
	On which prove compatibility. 
\end{rem}



\subsection{Ordinary forms}

Let $U^p(c)=U^p\prod_{v\mid p}Iw_1(v^c)$
where $Iw_1(v^c)=\{g\in K_v\mid g\equiv \smat{1&*\\&1}\mod \varpi_v^c\}$.

For $\gamma\in \oo_p\cap (F\otimes\Qp)^\times, f\in S_{k,w,\psi}(U^p(c) A)$,
\[
	(\langle\gamma\rangle\cdot f)(g)=
	\prod_{\sigma}\sigma(\gamma)^{-w_\sigma}\cdot
	\sum_{\alpha\in \oo_p/(\gamma)}
	\tau(\smat{\gamma&\alpha\\&1})\cdot
	f(g\smat{\gamma&\alpha\\&1}))
\]
Let $e=\lim_{n\to \infty}\langle p\rangle^{n!}\in \End_A(S_{k,w,\psi}(U^p(c),A))$
and define $S_{k,w,\psi}^{\ord}(U^p(c),A)$. This defines
\[
	\langle\cdot\rangle\colon (\F\otimes\Qp)^\times
	\to \End_A(S_{k,w,\psi}^{\ord}(U^p(c),A))
\]
Which induces  
\[
	\psi_{v,1}\colon G_{\F_v}
	\to \End_A(S_{k,w,\psi}^{\ord}(U^p(c),A))
\]
\begin{defn}
	$\TT_{k, \psi}^{\ord}(U^p)$ 
	acts faithfully on 
	$S_\psi^{\ord}(U^p,E/\oo)$ 
	and its Pontryagin dual.
	Also there exists 
	\[
		G_{F,S}\to \TT_{k, \psi}^{\ord}(U^p)
	\]
	This is independent of $k=(k,w)$
\end{defn}

\begin{rem}
	$\TT_{k, \psi}^{\ord}(U^p)$
	is reduced.
	Let 
	\[
		T^{\ord}\colon G_{F,S}\to 
		\TT_{k, \psi}^{\ord}(U^p)
	\]
	such that $\rho(\fp)\vert_{F_{F_v}}\sim \smat{\psi_{v,1}&*\\&1}$
	for $\fp\subset\TT_{k, \psi}^{\ord}(U^p)$
	Also  
	let $\Lambda_\F=\hat{\bigotimes}_{v\mid p}\oo\llbracket\oo_v^\times(p)\rrbracket$
	to $\TT^{\ord}$ by $ \langle\rangle$.
	And $M_\psi^{\ord}(U^p, E/\oo)$ 
	is finite free over $\Lambda_F$.
\end{rem}


\begin{rem}
	$S(U^p,E/\oo)_\fm(\langle \xi_\fm\rangle^{-1/2})$
	for 
	 \[
	 \xi_m=\zeta_m\langle \xi_\fm\rangle\colon 
	 Z(\A_f)\to \TT(U^p)_{\fm}
	 \]
	 s probably not $\GL_2(\Qp)$-admissible.
	 ut the property is needed for the existence of 
	 resolution $0\to \tilde{P}_\B^r\to \tilde{P}_\B^r\to 
	 S(U^p,E/\oo)_{\fm}^\vee\to 0$.
	 hus indeed we simply take $\psi=\zeta_\fm$
	 nd use 
	$S_\psi(U^p,E/\oo) _{\fm}\subset S(U^p,E/\oo)_{\fm}$.
\end{rem}

\begin{lem}
	$\Ord_P(S_\psi(U^p,E/\oo))=S_\psi^{\ord}(U^p,E/\oo)$	
\end{lem}
\begin{proof}
	Let $K(r)\equiv\smat{1&\\&1}$ 
	and $I_r\equiv\smat{1&*\\&1}=K(r)N_0$, then
	\[
	S_\psi(U^p,E/\oo)^{N_0}=\varinjlim_{I_r}
	S_\psi(U^pI_r,E/\oo)
	\]
	Consider then 
	\[
		\Ord_{P}(S_\psi(U^p,E/\oo))\coloneqq
		\Hom_{Z_M^+}(Z_M, S_\psi(U^p,E/\oo)^{N_{0}})_{Z_M-fin}
		\hookrightarrow S_\psi(U^p,E/\oo)^{N_0}\quad
		\phi\mapsto \phi(1)
	\]
	\begin{enumerate}[label=(\alph*)]
		\item given $\phi$ as above, 
			then  $Im(\phi)\subset S_\psi(U^p,E/\oo)^{N_0}$ 
			is a $Z_M$-finite subspace on which 
			 $U_p$ is invertible.
		 \item conversely, any  $f(g)\in S_\psi^{\ord}(U^p,E/\oo)
			 =\varinjlim S_\psi^{\ord}(U^pI_r,E/\oo)$ 
			 generates a  $Z_M$-finite subspace,
			 can use which to construct $\phi$
			 with  $\phi(1)=f(g)$.
	\end{enumerate}
\end{proof}

\begin{gather*}
S_\psi(U^p,E/\oo)\times \varprojlim \oo[Y(U^pU_p)]_\psi \times E/\oo\\
S_\psi^{\ord}(U^p,E/\oo)\times 
e\varprojlim \oo[Y(U^pI_r)]_\psi \times E/\oo\\
\end{gather*}
\begin{lem}
	$\Ord_P(S_\psi(U^p,E/\oo))^\vee\cong e\oo\llbracket Y(U^pI_\bullet)\rrbracket_\psi \cong e\oo\llbracket Y(U^pK_\bullet)\rrbracket$
\end{lem}
\begin{proof}
	Compare with $\oo\llbracket Y(U^pI_\bullet)\rrbracket$,
	with action by  $\oo\llbracket T(1+\varpi\oo)\rrbracket$.
	One is the quotient by  $XY=\psi$,
	one is the quotient by  $Y$,
	the quotient are both isomorphic to $\oo\llbracket X\rrbracket$.
\end{proof}



\section{pseudo-compact}

\begin{defn}
	A pseudocompact ring $\Lambda$
	is a complete Hausdorff topological ring 
	admitting systems of open neighborhood of  $0$
	consisting of two-sided ideas  $I$
	for which  $\Lambda/I$ is an Artin ring.
\end{defn}

\begin{defn}
	A pseudocompact $\Lambda$-module $M$
	is a complete Hausdorff topological $\Lambda$-module
	admitting systems of open neighborhood of  $0$
	consisting of submodules $N$
	for which  $M/N$ is of finite length.
	Which is equivalent to that 
	$M$ is the inverse limit of 
	 $\Lambda$-modules of finite length.
\end{defn}

\begin{defn}
	Fix a commutative pseudocompact ring $\Omega$.
	A pseudocompact $\Omega$-algebra  $\Lambda$
	is a complete Hausdorff topological ring
	admitting systems of open neighborhood of  $0$
	consisting of two-sided ideals $I$
	for which  $\Lambda/I$ is $\Omega$-modules of finite length.
\end{defn}
For example, $\Lambda=\oo\llbracket G\rrbracket$
for profinite group  $G$.

If $A$ is a f.g. right  $\Lambda$-modules, then 
 \[
	A\hat{\otimes}_\Lambda B\coloneqq
	\varprojlim(A/U\otimes_{\Lambda}B/V)\cong A\otimes_{\Lambda}B
\]
And also $\Omega\llbracket G\rrbracket\hat{\otimes}\Omega\llbracket H\rrbracket
\cong\Omega\llbracket G\times H\rrbracket$.

Let $E$ be the injective envelope of  $\Omega$ in the category of diescrete 
 $\Omega$-modules, then 
  \[
 	\{\text{right pseudocpt $\Lambda$-mod}\}\leftrightarrow
	\{\text{left discrete $\Lambda$-mod}\}\quad
	A\to \Hom_{\Omega}(A,E), 
	\Hom_{\Omega}(C,E)\rightarrow C
 \]

\begin{lem}
	Let $ \{\Lambda_i,\lambda_{ij}\}$
	be a  directed partially ordered inverse system of pseudocompact 
	$\Omega$-algebras. Similarly
	Let $ \{A_i,\alpha_{ij}\}, \{B_i,\beta_{ij}\}$
	and define 
	\[
		\Lambda=\varprojlim_{i}\Lambda_i,
		A=\varprojlim_{i}A_i,
		B=\varprojlim_{i}B_i,
	\]
	Then $A \hat{\otimes}_{\Lambda}B\cong 
	\varprojlim A_i\hat{\otimes}_{\Lambda_i}B_i$
	if $\lambda_{ij}, \alpha_{ij}, \beta_{ij}$
	are epimorphisms.
\end{lem}

For example, let $\Lambda=\Lambda_i=\oo$,
a valuationring of a finite extension  $E/\Qp$,
$A=A_i$ a local complete Noetherian  $\oo$-algebra
with finite residue,
and  $B=\oo\llbracket G\rrbracket =\varprojlim \oo[G/N_i]$
and  $B_i=\oo[G/N_i]$, then
\[
	A\llbracket G\rrbracket \coloneqq 
	A\hat{\otimes}_\oo\oo\llbracket G\rrbracket 
	\cong \varprojlim
	A\hat{\otimes}_{\oo}\oo[G/N_i]
	\cong \varprojlim
	A[G/N_i]
\]


\bibliographystyle{amsalpha}
\bibliography{biblio}
\end{document}

